<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

    <!-- ===========================
         BILLS TABLE FRAGMENT
    =========================== -->
    <section th:fragment="billTable" class="table-section bill-section">

        <div class="table-header">
            <h2>Bills</h2>
            <button id="billsAddRowBtn" class="add-row-btn">Add Row</button>
        </div>

        <table class="data-table">
            <thead>
                <tr>
                    <th>Vendor</th>
                    <th>Monthly Cost</th>
                    <th></th> <!-- delete column -->
                </tr>
            </thead>

            <tbody>
                <tr th:each="bill : ${billList}">
                    <td th:text="${bill.vendor}"></td>
                    <td th:text="${bill.amount}"></td>

                    <td>
                        <form th:action="@{/bills/delete}" method="post">
                            <input type="hidden" name="id" th:value="${bill.id}"/>
                            <button class="delete-btn">✖</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>



        <div class="table-total">
            <span>Total:</span>
            <span th:text="${billTotal}"></span>
        </div>

    </section>



    <!-- ===========================
         ITEMS / MATERIALS TABLE
    =========================== -->
    <section th:fragment="itemTable" class="table-section item-section">


        <div class="table-header">
            <h2>Items / Materials</h2>
            <button id="itemsAddRowBtn" class="add-row-btn">Add Row</button>
        </div>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Monthly Cost</th>
                    <th></th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="item : ${itemList}">
                    <td th:text="${item.name}"></td>
                    <td th:text="${item.cost}"></td>

                    <td>
                        <form th:action="@{/item/delete}" method="post">
                            <input type="hidden" name="id" th:value="${item.id}"/>
                            <button class="delete-btn">✖</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="table-total">
            <span>Total:</span>
            <span th:text="${itemTotal}"></span>
        </div>

    </section>



    <!-- ===========================
         EMPLOYEES TABLE
    =========================== -->
    <section th:fragment="employeeTable" class="table-section employee-section">

        <div class="table-header">
            <h2>Employees</h2>
            <button id="employeesAddRowBtn" class="add-row-btn">Add Row</button>
        </div>

        <table class="data-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Monthly Pay</th>
                    <th></th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="employee : ${employeeList}">
                    <td th:text="${employee.name}"></td>
                    <td th:text="${employee.pay}"></td>

                    <td>
                        <form th:action="@{/employee/delete}" method="post">
                            <input type="hidden" name="id" th:value="${employee.id}"/>
                            <button class="delete-btn">✖</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="table-total">
            <span>Total:</span>
            <span th:text="${employeeTotal}"></span>
        </div>

    </section>

    <!-- ===========================
             INCOME TABLE
        =========================== -->
    <section th:fragment="incomeTable" class="table-section income-section">

        <div class="table-header">
            <h2>Income</h2>
            <button id="incomesAddRowBtn" class="add-row-btn">Add Row</button>
        </div>

        <table class="data-table">
            <thead>
            <tr>
                <th>Type</th>
                <th>Monthly Amount</th>
                <th></th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="income : ${incomeList}">
                <td th:text="${income.type}"></td>
                <td th:text="${income.amount}"></td>
                <td th:if="${income.type == 'Horse Boarding'}">
                    <button disabled class="delete-btn">✖</button>
                </td>
                <td th:unless="${income.type == 'Horse Boarding'}">
                    <form th:action="@{/incomes/delete}" method="post">
                        <input type="hidden" name="id" th:value="${income.id}"/>
                        <button class="delete-btn">✖</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="table-total">
            <span>Total:</span>
            <span th:text="${incomeTotal}"></span>
        </div>

    </section>

<section th:if="${reportOutput != null and !reportOutput.empty}" th:fragment="reportTable" class="table-section report-section">

    <div class="table-header">
        <h2>Report</h2>
    </div>

    <table class="data-table">
        <thead>
        <tr>
            <th>Num Of Horses</th>
            <th>Expenses Total</th>
            <th>Income Total</th>
            <th>Difference</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="report : ${reportOutput}">
            <td th:text="${report.numberOfHorses}"></td>
            <td th:text="${report.expensesTotal}"></td>
            <td th:text="${report.incomeTotal}"></td>
            <td th:text="${report.difference}"></td>
        </tr>
        </tbody>
    </table>

</section>
</html>